{% extends 'base.html' %}
{% block title %}Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø© ÙÙŠ Ø§Ù„Ø­Ù…Ù„Ø©{% endblock %}

{% block content %}
<div class="container py-5" style="direction: rtl;">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow rounded-4 p-4">
                <h3 class="text-success fw-bold mb-4 text-center">
                    Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø© ÙÙŠ Ø­Ù…Ù„Ø©: {{ campaign.title }}
                </h3>

                <p class="mb-1"><strong>ğŸ¯ Ø§Ù„Ù‡Ø¯Ù:</strong> {{ campaign.goal_amount }} Ø´ÙŠÙƒÙ„</p>
                <p class="mb-1"><strong>ğŸ“ Ø§Ù„ÙˆØµÙ:</strong> {{ campaign.description }}</p>
                <p class="mb-1"><strong>ğŸ¢ Ø§Ù„Ø¬Ù‡Ø©:</strong> {{ campaign.ngo.organization_name }}</p>
                <p class="mb-4"><strong>ğŸ“… Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</strong> {{ campaign.deadline }}</p>

                <form method="post" class="mt-4">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="amount" class="form-label">ğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø°ÙŠ ØªØ±ØºØ¨ ÙÙŠ Ø§Ù„ØªØ¨Ø±Ø¹ Ø¨Ù‡</label>
                        <input type="number" min="1" name="amount" id="amount" class="form-control" required>
                        {% if errors.amount %}
                            <div class="text-danger mt-2">{{ errors.amount }}</div>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        <label for="payment_method" class="form-label">ğŸ’³ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>
                        <select name="payment_method" id="payment_method" class="form-select" onchange="toggleCardFields()" required>
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©</option>
                            <option value="palpay">PalPay</option>
                            <option value="credit">Ø¨Ø·Ø§Ù‚Ø© Ø§Ø¦ØªÙ…Ø§Ù†</option>
                        </select>
                    </div>

                    <div id="card-fields" style="display: none;">
                        <div class="mb-3">
                            <label for="card_number" class="form-label">Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</label>
                            <input type="text" name="card_number" id="card_number" class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="expiry" class="form-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</label>
                            <input type="text" name="expiry" id="expiry" class="form-control" placeholder="MM/YY">
                        </div>
                        <div class="mb-3">
                            <label for="cvv" class="form-label">Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ CVV</label>
                            <input type="text" name="cvv" id="cvv" class="form-control">
                        </div>
                    </div>

                    <div class="text-center mb-3">
                        <button type="submit" class="btn btn-success px-5 rounded-pill">ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ¨Ø±Ø¹</button>
                    </div>
                </form>

                <div class="text-center">
                    <a href="{% url 'donor_dashboard' %}" class="btn btn-outline-success rounded-pill px-4">
                        Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function toggleCardFields() {
    const method = document.getElementById('payment_method').value;
    const cardFields = document.getElementById('card-fields');
    cardFields.style.display = method === 'credit' ? 'block' : 'none';
}
</script>
{% endblock %}
